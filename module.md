# Module

Модуль представляет из себя JS-файл (или кусок кода), оформленный специальным образом. Формат базируется на AMD, но с учетом особенностей Neweb.

Модуль должен начинаться с вызова функции define, которая принимает 3 обязательных параметра:

1. Название модуля.
2. Массив зависимостей модуля.
3. Callback-функцию, в теле которой содержится, собственно, код.
```javascript
define(["l",".","index","160903","*"], ["npm",["jquery",["0.0.1",["index",["ajax", "default"]]]]], function(dependencies, require, exports, module){
        var $ = require(dependencies[1]);
        console.log($("#id1").html());
        var jQueryGet = require(dependencies[0]);
        jQueryGet(/*...*/).then(()=>{/*...*/});
})
```    
Предполагается, что модули создаются не вручную, а с помощью различных упаковщиков.

# Наименование модуля

В современном мире мы используем множество различных систем для создания конечного кода, большая часть которого может быть переиспользована. Поэтому Neweb предлагает следующий формат именования модулей, основанный на опыте использования существующих систем:

`ТИП,ПАКЕТ,ВЕРСИЯ,ПУТЬ,ЭКСПОРТ`

Надо понимать, что этот формат выведен исключительно эмпирическим путем за долгие годы использования различных систем, и представляет собой обычный многомерный массив для определения полного пути к модулю.

Все параметры являются обязательными.

Загрузчик модуля должен реализовывать в глобальном пространстве функцию define и, после получения кода, выполнить его.

Функция define загружает все зависимости данного модуля, после чего модуль считается готовым к require. При первой потребности в модуле, вызывает callback-функцию и передает в нее 4-е параметра:

1. Массив зависимостей (сверху вниз по дереву).
2. require - функция для загрузки зависимости из массива.
3. exports  см. commonjs exports.
4. module - см. commonjs module.

После чего, складывает значение в кэш и отдает его при каждом вызове require. Версионность позволяет кэшировать модули "навсегда". 

Каждый загрузчик модуля волен определять способы загрузки модуля по его имени, это может быть интернет, локальный кэш, вручную введенный код и т.д.

Например, определить, что тип NPM загружается с помощью Ajax по определенному URL (это может быть CDN).
А тип l (local) загружается с помощью вебсокетов.

Очистка кэша возможна на основе версионности или учета давности использования модуля.
